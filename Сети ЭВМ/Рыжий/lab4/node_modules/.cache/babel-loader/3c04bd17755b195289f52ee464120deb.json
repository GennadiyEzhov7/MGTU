{"ast":null,"code":"import Menu from '@/components/Menu.vue';\nexport default {\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: 'Game',\n  props: [],\n  components: {\n    Menu\n  },\n\n  data() {\n    return {\n      gameState: 'set',\n      engine: false,\n      pause: false,\n      x: 265,\n      y: 0,\n      s: 0,\n      v: 0,\n      v0: 0,\n      s0: 0,\n      currentFuel: 0,\n      currentTime: new Date().getTime(),\n      startTime: 0,\n      gameTime: 0,\n      pauseTime: 0,\n      rocketON: new Image(),\n      rocketOFF: new Image(),\n      pauseImg: new Image(),\n      explosionImg: new Image(),\n      inputs: [{\n        title: \"Вес аппарата, кг\",\n        value: \"1500\"\n      }, {\n        title: \"Вес топлива, кг\",\n        value: \"500\"\n      }, {\n        title: \"Вес импульса, кг\",\n        value: \"10\"\n      }, {\n        title: \"Скорость истечения, м/с\",\n        value: \"300\"\n      }, {\n        title: \"Максимальная скорость касания, м/с\",\n        value: \"10\"\n      }, {\n        title: \"Ускорение свободного падения, м/с\",\n        value: \"10\"\n      }, {\n        title: \"Лимит времени, с\",\n        value: \"120\"\n      }, {\n        title: \"Начальное расстояние, м\",\n        value: \"1000\"\n      }]\n    };\n  },\n\n  methods: {\n    setStartTime() {\n      this.startTime = new Date().getTime();\n    },\n\n    setGameState(state) {\n      this.gameState = state;\n      this.currentTime = new Date().getTime();\n\n      if (state === 'set') {\n        this.restart();\n      }\n    },\n\n    setInputs(id, newValue) {\n      this.inputs[id].value = newValue;\n    },\n\n    drawRocket() {\n      const canvas = document.getElementById(\"canvas\"),\n            ctx = canvas.getContext(\"2d\");\n      this.engine ? ctx.drawImage(this.rocketON, this.x, this.y) : ctx.drawImage(this.rocketOFF, this.x, this.y);\n    },\n\n    fall() {\n      this.currentFuel = Number(this.inputs[1].value);\n      const finishY = 460;\n      const koef = this.inputs[7].value / finishY;\n      const canvas = document.getElementById(\"canvas\"),\n            ctx = canvas.getContext(\"2d\");\n      const refreshInterval = setInterval(function () {\n        this.disableAndActivateButtons();\n\n        if (this.pause) {\n          ctx.drawImage(this.pauseImg, 0, 0);\n          this.pauseTime = new Date().getTime() - this.currentTime;\n        }\n\n        if (!this.pause && this.gameState === 'game') {\n          if (this.y < finishY) {\n            this.gameTime = new Date().getTime() - this.startTime;\n\n            if (this.currentFuel > 0 && this.engine) {\n              this.currentFuel -= Number(this.inputs[2].value);\n\n              if (this.currentFuel < 0) {\n                this.currentFuel = 0;\n              }\n\n              this.v = ((Number(this.inputs[0].value) + Number(this.inputs[1].value)) * this.v - Number(this.inputs[2].value) * Number(this.inputs[3].value)) / (Number(this.inputs[0].value) + Number(this.inputs[1].value) - Number(this.inputs[2].value));\n              this.s = this.s0 + (new Date().getTime() - this.currentTime) / 1000 * this.v;\n              this.y = this.s / koef;\n            } else {\n              if (this.engine) {\n                this.engine = false;\n                this.s0 = this.s;\n                this.v0 = this.v;\n              }\n\n              this.v = this.v0 + (new Date().getTime() - this.currentTime) / 1000 * Number(this.inputs[5].value);\n              this.s = this.s0 + (new Date().getTime() - this.currentTime) / 1000 * this.v;\n              this.y = this.s / koef;\n            }\n\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            this.drawRocket();\n          } else {\n            if (this.v <= Number(this.inputs[4].value)) {\n              ctx.fillStyle = \"#FFF\";\n              ctx.font = \"30pt Calibri\";\n              ctx.fillText(\"You win!\", 30, 280);\n              this.setGameState('restart');\n              clearInterval(refreshInterval);\n            } else {\n              ctx.clearRect(0, 0, canvas.width, canvas.height);\n              ctx.drawImage(this.explosionImg, this.x - 20, this.y);\n              this.setGameState('restart');\n              clearInterval(refreshInterval);\n            }\n          }\n        }\n      }.bind(this), 25);\n    },\n\n    turnEngine() {\n      if (!document.getElementById('engine').classList.contains('disabled') && this.currentFuel > 0) {\n        this.engine = !this.engine;\n        this.v0 = this.v;\n        this.s0 = this.s;\n        this.currentTime = new Date().getTime();\n        const canvas = document.getElementById(\"canvas\"),\n              ctx = canvas.getContext(\"2d\");\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        this.drawRocket();\n      }\n    },\n\n    turnPause() {\n      if (!document.getElementById('pause').classList.contains('disabled')) {\n        this.pause = !this.pause;\n        this.v0 = this.v;\n        this.s0 = this.s;\n        this.currentTime = new Date().getTime();\n\n        if (!this.pause) {\n          this.startTime += this.pauseTime;\n        }\n      }\n    },\n\n    disableAndActivateButtons() {\n      if (this.y > 460 || this.pause || this.gameState === 'set') {\n        const engineButton = document.getElementById('engine');\n        engineButton.classList.add('disabled');\n      } else {\n        const engineButton = document.getElementById('engine');\n        engineButton.classList.remove('disabled');\n      }\n\n      if (this.y > 460 || this.gameState === 'set') {\n        const pauseButton = document.getElementById('pause');\n        pauseButton.classList.add('disabled');\n      } else {\n        const pauseButton = document.getElementById('pause');\n        pauseButton.classList.remove('disabled');\n      }\n    },\n\n    restart() {\n      this.v = 0;\n      this.v0 = 0;\n      this.s = 0;\n      this.s0 = 0;\n      this.y = 0;\n      const canvas = document.getElementById(\"canvas\"),\n            ctx = canvas.getContext(\"2d\");\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n    }\n\n  },\n\n  mounted() {\n    this.pauseImg.src = './img/pause.png';\n    this.rocketON.src = './img/engineOn.png';\n    this.rocketOFF.src = './img/engineOff.png';\n    this.explosionImg.src = './img/explosion.png';\n  }\n\n};","map":{"version":3,"mappings":"AAcA,OAAOA,IAAP,MAAiB,uBAAjB;AACA,eAAe;AACb;AACAC,MAAI,EAAE,MAFO;AAGbC,OAAK,EAAE,EAHM;AAIbC,YAAU,EAAE;AACVH;AADU,GAJC;;AAObI,MAAI,GAAG;AACL,WAAO;AACLC,eAAS,EAAE,KADN;AAELC,YAAM,EAAE,KAFH;AAGLC,WAAK,EAAE,KAHF;AAILC,OAAC,EAAE,GAJE;AAKLC,OAAC,EAAE,CALE;AAMLC,OAAC,EAAE,CANE;AAOLC,OAAC,EAAE,CAPE;AAQLC,QAAE,EAAE,CARC;AASLC,QAAE,EAAE,CATC;AAULC,iBAAW,EAAE,CAVR;AAWLC,iBAAW,EAAE,IAAIC,IAAJ,GAAWC,OAAX,EAXR;AAYLC,eAAS,EAAE,CAZN;AAaLC,cAAQ,EAAE,CAbL;AAcLC,eAAS,EAAE,CAdN;AAeLC,cAAQ,EAAE,IAAIC,KAAJ,EAfL;AAgBLC,eAAS,EAAE,IAAID,KAAJ,EAhBN;AAiBLE,cAAQ,EAAE,IAAIF,KAAJ,EAjBL;AAkBLG,kBAAY,EAAE,IAAIH,KAAJ,EAlBT;AAmBLI,YAAM,EAAE,CACN;AAAEC,aAAK,EAAE,kBAAT;AAA6BC,aAAK,EAAE;AAApC,OADM,EAEN;AAAED,aAAK,EAAE,iBAAT;AAA4BC,aAAK,EAAE;AAAnC,OAFM,EAGN;AAAED,aAAK,EAAE,kBAAT;AAA6BC,aAAK,EAAE;AAApC,OAHM,EAIN;AAAED,aAAK,EAAE,yBAAT;AAAoCC,aAAK,EAAE;AAA3C,OAJM,EAKN;AAAED,aAAK,EAAE,oCAAT;AAA+CC,aAAK,EAAE;AAAtD,OALM,EAMN;AAAED,aAAK,EAAE,mCAAT;AAA8CC,aAAK,EAAE;AAArD,OANM,EAON;AAAED,aAAK,EAAE,kBAAT;AAA6BC,aAAK,EAAE;AAApC,OAPM,EAQN;AAAED,aAAK,EAAE,yBAAT;AAAoCC,aAAK,EAAE;AAA3C,OARM;AAnBH,KAAP;AA8BD,GAtCY;;AAuCbC,SAAO,EAAE;AACPC,gBAAY,GAAE;AACZ,WAAKZ,SAAL,GAAiB,IAAIF,IAAJ,GAAWC,OAAX,EAAjB;AACD,KAHM;;AAIPc,gBAAY,CAACC,KAAD,EAAO;AACjB,WAAK3B,SAAL,GAAiB2B,KAAjB;AACA,WAAKjB,WAAL,GAAmB,IAAIC,IAAJ,GAAWC,OAAX,EAAnB;;AACA,UAAIe,KAAI,KAAM,KAAd,EAAqB;AACnB,aAAKC,OAAL;AACF;AACD,KAVM;;AAWPC,aAAS,CAACC,EAAD,EAAKC,QAAL,EAAe;AACtB,WAAKV,MAAL,CAAYS,EAAZ,EAAgBP,KAAhB,GAAwBQ,QAAxB;AACD,KAbM;;AAcPC,cAAU,GAAG;AACX,YAAMC,MAAK,GAAIC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAf;AAAA,YACMC,GAAE,GAAIH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CADZ;AAGA,WAAKpC,MAAL,GAAcmC,GAAG,CAACE,SAAJ,CAAc,KAAKtB,QAAnB,EAA6B,KAAKb,CAAlC,EAAqC,KAAKC,CAA1C,CAAd,GAA6DgC,GAAG,CAACE,SAAJ,CAAc,KAAKpB,SAAnB,EAA8B,KAAKf,CAAnC,EAAsC,KAAKC,CAA3C,CAA7D;AACD,KAnBM;;AAoBPmC,QAAI,GAAG;AACL,WAAK9B,WAAL,GAAmB+B,MAAM,CAAC,KAAKnB,MAAL,CAAY,CAAZ,EAAeE,KAAhB,CAAzB;AACA,YAAMkB,OAAM,GAAI,GAAhB;AACA,YAAMC,IAAG,GAAK,KAAKrB,MAAL,CAAY,CAAZ,EAAeE,KAAf,GAAuBkB,OAArC;AACA,YAAMR,MAAK,GAAIC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAf;AAAA,YACMC,GAAE,GAAIH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CADZ;AAEA,YAAMM,eAAc,GAAIC,WAAW,CAAC,YAAW;AAC7C,aAAKC,yBAAL;;AAEA,YAAI,KAAK3C,KAAT,EAAgB;AAACkC,aAAG,CAACE,SAAJ,CAAc,KAAKnB,QAAnB,EAA6B,CAA7B,EAAgC,CAAhC;AAAoC,eAAKJ,SAAL,GAAiB,IAAIJ,IAAJ,GAAWC,OAAX,KAAuB,KAAKF,WAA7C;AAAwD;;AAE7G,YAAK,CAAC,KAAKR,KAAP,IAAkB,KAAKF,SAAL,KAAmB,MAAzC,EAAkD;AAChD,cAAI,KAAKI,CAAL,GAASqC,OAAb,EAAsB;AACpB,iBAAK3B,QAAL,GAAgB,IAAIH,IAAJ,GAAWC,OAAX,KAAuB,KAAKC,SAA5C;;AACA,gBAAK,KAAKJ,WAAL,GAAmB,CAApB,IAA2B,KAAKR,MAApC,EAA6C;AAC3C,mBAAKQ,WAAL,IAAoB+B,MAAM,CAAC,KAAKnB,MAAL,CAAY,CAAZ,EAAeE,KAAhB,CAA1B;;AACA,kBAAI,KAAKd,WAAL,GAAmB,CAAvB,EAA0B;AAAE,qBAAKA,WAAL,GAAmB,CAAnB;AAAsB;;AAClD,mBAAKH,CAAL,GAAS,CAAE,CAACkC,MAAM,CAAC,KAAKnB,MAAL,CAAY,CAAZ,EAAeE,KAAhB,CAAN,GAA+BiB,MAAM,CAAC,KAAKnB,MAAL,CAAY,CAAZ,EAAeE,KAAhB,CAAtC,IAAgE,KAAKjB,CAAtE,GACCkC,MAAM,CAAC,KAAKnB,MAAL,CAAY,CAAZ,EAAeE,KAAhB,CAAN,GAA+BiB,MAAM,CAAC,KAAKnB,MAAL,CAAY,CAAZ,EAAeE,KAAhB,CADvC,KAEFiB,MAAM,CAAC,KAAKnB,MAAL,CAAY,CAAZ,EAAeE,KAAhB,CAAN,GAA+BiB,MAAM,CAAC,KAAKnB,MAAL,CAAY,CAAZ,EAAeE,KAAhB,CAArC,GAA8DiB,MAAM,CAAC,KAAKnB,MAAL,CAAY,CAAZ,EAAeE,KAAhB,CAFlE,CAAT;AAGA,mBAAKlB,CAAL,GAAS,KAAKG,EAAL,GAAU,CAAC,IAAIG,IAAJ,GAAWC,OAAX,KAAwB,KAAKF,WAA9B,IAA6C,IAA7C,GAAoD,KAAKJ,CAA5E;AACA,mBAAKF,CAAL,GAAS,KAAKC,CAAL,GAASqC,IAAlB;AACF,aARA,MAQO;AACL,kBAAI,KAAKzC,MAAT,EAAiB;AACf,qBAAKA,MAAL,GAAc,KAAd;AACA,qBAAKO,EAAL,GAAU,KAAKH,CAAf;AACA,qBAAKE,EAAL,GAAU,KAAKD,CAAf;AACF;;AACA,mBAAKA,CAAL,GAAS,KAAKC,EAAL,GAAU,CAAC,IAAII,IAAJ,GAAWC,OAAX,KAAuB,KAAKF,WAA7B,IAA0C,IAA1C,GAAiD8B,MAAM,CAAC,KAAKnB,MAAL,CAAY,CAAZ,EAAeE,KAAhB,CAA1E;AACA,mBAAKlB,CAAL,GAAS,KAAKG,EAAL,GAAU,CAAC,IAAIG,IAAJ,GAAWC,OAAX,KAAuB,KAAKF,WAA7B,IAA0C,IAA1C,GAAiD,KAAKJ,CAAzE;AACA,mBAAKF,CAAL,GAAS,KAAKC,CAAL,GAASqC,IAAlB;AACF;;AACAN,eAAG,CAACU,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoBb,MAAM,CAACc,KAA3B,EAAkCd,MAAM,CAACe,MAAzC;AACA,iBAAKhB,UAAL;AACF,WAtBA,MAsBO;AACL,gBAAI,KAAK1B,CAAL,IAAUkC,MAAM,CAAC,KAAKnB,MAAL,CAAY,CAAZ,EAAeE,KAAhB,CAApB,EAA4C;AAC1Ca,iBAAG,CAACa,SAAJ,GAAgB,MAAhB;AACAb,iBAAG,CAACc,IAAJ,GAAW,cAAX;AACAd,iBAAG,CAACe,QAAJ,CAAa,UAAb,EAAyB,EAAzB,EAA6B,GAA7B;AACA,mBAAKzB,YAAL,CAAkB,SAAlB;AACA0B,2BAAa,CAACT,eAAD,CAAb;AACF,aANA,MAMO;AACLP,iBAAG,CAACU,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoBb,MAAM,CAACc,KAA3B,EAAkCd,MAAM,CAACe,MAAzC;AACAZ,iBAAG,CAACE,SAAJ,CAAc,KAAKlB,YAAnB,EAAiC,KAAKjB,CAAL,GAAO,EAAxC,EAA4C,KAAKC,CAAjD;AACA,mBAAKsB,YAAL,CAAkB,SAAlB;AACA0B,2BAAa,CAACT,eAAD,CAAb;AACF;AACF;AACF;AACD,OA3CmC,CA2ClCU,IA3CkC,CA2C7B,IA3C6B,CAAD,EA2CrB,EA3CqB,CAAnC;AA4CD,KAtEM;;AAuEPC,cAAU,GAAG;AACX,UAAI,CAACpB,QAAQ,CAACC,cAAT,CAAwB,QAAxB,EAAkCoB,SAAlC,CAA4CC,QAA5C,CAAqD,UAArD,CAAD,IAAqE,KAAK/C,WAAL,GAAmB,CAA5F,EAA+F;AAC7F,aAAKR,MAAL,GAAc,CAAC,KAAKA,MAApB;AACA,aAAKM,EAAL,GAAU,KAAKD,CAAf;AACA,aAAKE,EAAL,GAAU,KAAKH,CAAf;AACA,aAAKK,WAAL,GAAmB,IAAIC,IAAJ,GAAWC,OAAX,EAAnB;AACA,cAAMqB,MAAK,GAAIC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAf;AAAA,cACIC,GAAE,GAAIH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CADV;AAEAD,WAAG,CAACU,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoBb,MAAM,CAACc,KAA3B,EAAkCd,MAAM,CAACe,MAAzC;AACA,aAAKhB,UAAL;AACF;AACD,KAlFM;;AAmFPyB,aAAS,GAAG;AACV,UAAI,CAACvB,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCoB,SAAjC,CAA2CC,QAA3C,CAAoD,UAApD,CAAL,EAAsE;AACpE,aAAKtD,KAAL,GAAa,CAAC,KAAKA,KAAnB;AACA,aAAKK,EAAL,GAAU,KAAKD,CAAf;AACA,aAAKE,EAAL,GAAU,KAAKH,CAAf;AACA,aAAKK,WAAL,GAAmB,IAAIC,IAAJ,GAAWC,OAAX,EAAnB;;AACA,YAAI,CAAC,KAAKV,KAAV,EAAiB;AAAE,eAAKW,SAAL,IAAkB,KAAKE,SAAvB;AAAkC;AACvD;AACD,KA3FM;;AA4FP8B,6BAAyB,GAAG;AAC1B,UAAK,KAAKzC,CAAL,GAAS,GAAV,IAAmB,KAAKF,KAAxB,IAAmC,KAAKF,SAAL,KAAmB,KAA1D,EAAkE;AAChE,cAAM0D,YAAW,GAAIxB,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAArB;AACAuB,oBAAY,CAACH,SAAb,CAAuBI,GAAvB,CAA2B,UAA3B;AACF,OAHA,MAGO;AACL,cAAMD,YAAW,GAAIxB,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAArB;AACAuB,oBAAY,CAACH,SAAb,CAAuBK,MAAvB,CAA8B,UAA9B;AACF;;AACA,UAAK,KAAKxD,CAAL,GAAS,GAAV,IAAmB,KAAKJ,SAAL,KAAmB,KAA1C,EAAkD;AAChD,cAAM6D,WAAU,GAAI3B,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAApB;AACA0B,mBAAW,CAACN,SAAZ,CAAsBI,GAAtB,CAA0B,UAA1B;AACF,OAHA,MAGO;AACL,cAAME,WAAU,GAAI3B,QAAQ,CAACC,cAAT,CAAwB,OAAxB,CAApB;AACA0B,mBAAW,CAACN,SAAZ,CAAsBK,MAAtB,CAA6B,UAA7B;AACF;AACD,KA3GM;;AA4GPhC,WAAO,GAAG;AACR,WAAKtB,CAAL,GAAS,CAAT;AACA,WAAKC,EAAL,GAAS,CAAT;AACA,WAAKF,CAAL,GAAS,CAAT;AACA,WAAKG,EAAL,GAAU,CAAV;AACA,WAAKJ,CAAL,GAAS,CAAT;AACA,YAAM6B,MAAK,GAAIC,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAAf;AAAA,YACIC,GAAE,GAAIH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CADV;AAEAD,SAAG,CAACU,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoBb,MAAM,CAACc,KAA3B,EAAkCd,MAAM,CAACe,MAAzC;AACF;;AArHO,GAvCI;;AA8Jbc,SAAO,GAAG;AACR,SAAK3C,QAAL,CAAc4C,GAAd,GAAkB,iBAAlB;AACA,SAAK/C,QAAL,CAAc+C,GAAd,GAAoB,oBAApB;AACA,SAAK7C,SAAL,CAAe6C,GAAf,GAAqB,qBAArB;AACA,SAAK3C,YAAL,CAAkB2C,GAAlB,GAAwB,qBAAxB;AACD;;AAnKY,CAAf","names":["Menu","name","props","components","data","gameState","engine","pause","x","y","s","v","v0","s0","currentFuel","currentTime","Date","getTime","startTime","gameTime","pauseTime","rocketON","Image","rocketOFF","pauseImg","explosionImg","inputs","title","value","methods","setStartTime","setGameState","state","restart","setInputs","id","newValue","drawRocket","canvas","document","getElementById","ctx","getContext","drawImage","fall","Number","finishY","koef","refreshInterval","setInterval","disableAndActivateButtons","clearRect","width","height","fillStyle","font","fillText","clearInterval","bind","turnEngine","classList","contains","turnPause","engineButton","add","remove","pauseButton","mounted","src"],"sourceRoot":"","sources":["C:\\Users\\mvarlamov\\Desktop\\web\\lab4\\src\\components\\Game.vue"],"sourcesContent":["<template>\n  <div class=\"contaiter\">\n    <canvas class=\"canvas\" id=\"canvas\" width=\"600\" height=\"600\">\n      <p>Ваш браузер не поддерживает рисование.</p>\n    </canvas>\n  </div>\n  <Menu :turnEngine=\"turnEngine\" :pause=\"turnPause\" :inputs=\"inputs\"\n        :setInputs=\"setInputs\" :gameState=\"gameState\" :setGameState=\"setGameState\"\n        :start=\"fall\" :s=\"s\" :v=\"v\" :setStartTime=\"setStartTime\" :gameTime=\"gameTime\"\n        :currentFuel=\"currentFuel\"\n  />\n</template>\n\n<script>\nimport Menu from '@/components/Menu.vue'\nexport default {\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: 'Game',\n  props: [],\n  components: {\n    Menu\n  },\n  data() {\n    return {\n      gameState: 'set',\n      engine: false,\n      pause: false,\n      x: 265,\n      y: 0,\n      s: 0,\n      v: 0,\n      v0: 0,\n      s0: 0,\n      currentFuel: 0,\n      currentTime: new Date().getTime(),\n      startTime: 0,\n      gameTime: 0,\n      pauseTime: 0,\n      rocketON: new Image(),\n      rocketOFF: new Image(),\n      pauseImg: new Image(),\n      explosionImg: new Image(),\n      inputs: [\n        { title: \"Вес аппарата, кг\", value: \"1500\" },\n        { title: \"Вес топлива, кг\", value: \"500\" },\n        { title: \"Вес импульса, кг\", value: \"10\" },\n        { title: \"Скорость истечения, м/с\", value: \"300\" },\n        { title: \"Максимальная скорость касания, м/с\", value: \"10\" },\n        { title: \"Ускорение свободного падения, м/с\", value: \"10\" },\n        { title: \"Лимит времени, с\", value: \"120\" },\n        { title: \"Начальное расстояние, м\", value: \"1000\" },\n      ]\n    }\n  },\n  methods: {\n    setStartTime(){\n      this.startTime = new Date().getTime();\n    },\n    setGameState(state){\n      this.gameState = state;\n      this.currentTime = new Date().getTime();\n      if (state === 'set') {\n        this.restart()\n      }\n    },\n    setInputs(id, newValue) {\n      this.inputs[id].value = newValue;\n    },\n    drawRocket() {\n      const canvas = document.getElementById(\"canvas\"),\n            ctx = canvas.getContext(\"2d\");\n\n      this.engine ? ctx.drawImage(this.rocketON, this.x, this.y) : ctx.drawImage(this.rocketOFF, this.x, this.y);\n    },\n    fall() {\n      this.currentFuel = Number(this.inputs[1].value);\n      const finishY = 460;\n      const koef = (this.inputs[7].value / finishY)\n      const canvas = document.getElementById(\"canvas\"),\n            ctx = canvas.getContext(\"2d\");\n      const refreshInterval = setInterval(function() {\n        this.disableAndActivateButtons();\n\n        if (this.pause) {ctx.drawImage(this.pauseImg, 0, 0); this.pauseTime = new Date().getTime() - this.currentTime}\n\n        if ((!this.pause) && (this.gameState === 'game')) {\n          if (this.y < finishY) {\n            this.gameTime = new Date().getTime() - this.startTime;\n            if ((this.currentFuel > 0) && (this.engine)) {\n              this.currentFuel -= Number(this.inputs[2].value);\n              if (this.currentFuel < 0) { this.currentFuel = 0; }\n              this.v = (((Number(this.inputs[0].value) + Number(this.inputs[1].value)) * this.v)\n                      - (Number(this.inputs[2].value) * Number(this.inputs[3].value)))\n                  / (Number(this.inputs[0].value) + Number(this.inputs[1].value) - Number(this.inputs[2].value));\n              this.s = this.s0 + (new Date().getTime() -  this.currentTime) / 1000 * this.v;\n              this.y = this.s / koef ;\n            } else {\n              if (this.engine) {\n                this.engine = false;\n                this.s0 = this.s;\n                this.v0 = this.v;\n              }\n              this.v = this.v0 + (new Date().getTime() - this.currentTime)/1000 * Number(this.inputs[5].value);\n              this.s = this.s0 + (new Date().getTime() - this.currentTime)/1000 * this.v;\n              this.y = this.s / koef;\n            }\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            this.drawRocket();\n          } else {\n            if (this.v <= Number(this.inputs[4].value)) {\n              ctx.fillStyle = \"#FFF\";\n              ctx.font = \"30pt Calibri\";\n              ctx.fillText(\"You win!\", 30, 280);\n              this.setGameState('restart');\n              clearInterval(refreshInterval);\n            } else {\n              ctx.clearRect(0, 0, canvas.width, canvas.height);\n              ctx.drawImage(this.explosionImg, this.x-20, this.y);\n              this.setGameState('restart');\n              clearInterval(refreshInterval);\n            }\n          }\n        }\n      }.bind(this), 25)\n    },\n    turnEngine() {\n      if (!document.getElementById('engine').classList.contains('disabled') && this.currentFuel > 0) {\n        this.engine = !this.engine;\n        this.v0 = this.v;\n        this.s0 = this.s;\n        this.currentTime = new Date().getTime();\n        const canvas = document.getElementById(\"canvas\"),\n            ctx = canvas.getContext(\"2d\");\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        this.drawRocket();\n      }\n    },\n    turnPause() {\n      if (!document.getElementById('pause').classList.contains('disabled')) {\n        this.pause = !this.pause;\n        this.v0 = this.v;\n        this.s0 = this.s;\n        this.currentTime = new Date().getTime();\n        if (!this.pause) { this.startTime += this.pauseTime; }\n      }\n    },\n    disableAndActivateButtons() {\n      if ((this.y > 460) || (this.pause) || (this.gameState === 'set')) {\n        const engineButton = document.getElementById('engine');\n        engineButton.classList.add('disabled')\n      } else {\n        const engineButton = document.getElementById('engine');\n        engineButton.classList.remove('disabled')\n      }\n      if ((this.y > 460) || (this.gameState === 'set')) {\n        const pauseButton = document.getElementById('pause');\n        pauseButton.classList.add('disabled');\n      } else {\n        const pauseButton = document.getElementById('pause');\n        pauseButton.classList.remove('disabled');\n      }\n    },\n    restart() {\n      this.v = 0;\n      this.v0= 0;\n      this.s = 0;\n      this.s0 = 0;\n      this.y = 0;\n      const canvas = document.getElementById(\"canvas\"),\n          ctx = canvas.getContext(\"2d\");\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n    }\n  },\n  mounted() {\n    this.pauseImg.src='./img/pause.png';\n    this.rocketON.src = './img/engineOn.png';\n    this.rocketOFF.src = './img/engineOff.png';\n    this.explosionImg.src = './img/explosion.png';\n  },\n}\n</script>\n\n<style scoped>\n.canvas {\n  background: url('/public/img/background.jpg') no-repeat;\n  width: 600px;\n  height: 600px;\n}\nhtml, body {\n  background-color: black;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}